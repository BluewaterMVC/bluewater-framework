# SYNC\_PROCESS.md

## Purpose

This document defines the **official workflow, responsibilities, and required actions** for documentation, translation, and publication synchronization across the Bluewater project.
It governs how content moves between the `bluewater-framework` and `bluewater-docs` repositories, ensures multi-language parity, and codifies automation and review standards for all contributors and maintainers.

---

## Repository Roles & Content Flows

| Repository          | Docs Location | Type                             | Source of Truth?          | Sync Direction                                                           |
|---------------------|---------------|----------------------------------|---------------------------|--------------------------------------------------------------------------|
| bluewater-framework | /technical/   | Technical Docs, PHPDoc           | YES (for tech docs)       | Manual: `/technical/` → `/docs/en/` (then auto-sync to `bluewater-docs`) |
| bluewater-framework | /docs/        | Generated, do not edit           | NO                        | Copied to `bluewater-docs` during sync                                   |
| bluewater-docs      | /docs/        | User-facing docs (all languages) | YES (for user docs, i18n) | Published via GitHub Pages                                               |

---

## Authoritative Sync Workflow

### 1. **Edit Only in Source Directories**

* **Technical documentation:** Edit in `/technical/` (not `/docs/`).
* **Translation files:** Only update or add in their language-specific directories (`/docs/<lang>/`).

### 2. **Run Pre-Commit Hooks**

* All doc edits must pass pre-commit hooks for:

    * Metadata tokens (title, author, copyright, license)
    * Last updated (`Last updated: {{DATE}}`)
    * Markdown linting and formatting
    * Automated structure validation for multi-language directories

### 3. **Maintain Structure Parity**

* **Canonical structure is defined by `/docs/en/`.**
* Use `/tools/i18n/sync_docs_structure.py` to ensure all `/docs/<lang>/` directories match `/docs/en/` structure.
* Newly added/changed docs in English must be mirrored (or placeholders created) in every target language.
* If a translation is missing, submit a translation request and create a placeholder with a `TODO` comment.

### 4. **Navigation Consistency**

* All navigation changes must be reflected in the `nav_translations` section of `mkdocs.yml` for all languages defined in `/tools/i18n/lang.yml`.
* Never commit a change to `/docs/en/` navigation without updating all corresponding language navigation blocks.

### 5. **Never Edit `/docs/` Directly**

* `/docs/` is a **generated output directory**. Do not edit or PR to this folder directly—such changes will be overwritten.
* All manual doc changes must originate from `/technical/` (or `/docs/en/` for translations).

### 6. **Automation, Changelog, and CI**

* **Never manually edit `CHANGELOG.md`.**
  All changelog entries are generated by GitHub Actions upon release tags, using PR titles, issue links, and commit messages.
* All documentation, code, and translation PRs must pass CI checks (tests, lint, doc build).

### 7. **Checklist Before Committing or Syncing**

* [ ] All edits are made in `/technical/` (technical docs) or `/docs/en/` (translations)
* [ ] Pre-commit hooks and markdownlint pass locally
* [ ] Required metadata fields present in every file
* [ ] `Last updated: {{DATE}}` is correct (auto-updated by hooks)
* [ ] `/tools/i18n/sync_docs_structure.py` has been run to validate i18n directory structure
* [ ] All `/docs/<lang>/` directories are in parity with `/docs/en/`
* [ ] All navigation and `nav_translations` entries are up to date for every language
* [ ] No manual changes to `/docs/` or `CHANGELOG.md`
* [ ] If translations are not yet available, translation requests and placeholders have been created
* [ ] All changes follow [CONTRIBUTING.md](./CONTRIBUTING.md) and [Code of Conduct](./CODE_OF_CONDUCT.md)
* [ ] (For PRs) Summary, scope, and linkage are clear; title and description are actionable

### 8. **Sync and Publish**

* **Manual/Automated Sync:**
  After validation, `/docs/` is synced from `bluewater-framework` to `bluewater-docs` (by automation or designated maintainers).
* **Publication:**
  `bluewater-docs` `/docs/` is published via GitHub Pages or other CI pipeline.

### 9. **Special Notes**

* **Do not localize or alter this process except via PR and full maintainer review.**
* **Sync tools, scripts, and their configuration are located in `/tools/`.**
  See `/tools/i18n/README.md` for details.

### 10. **References and Cross-links**

* [CONTRIBUTING.md](./CONTRIBUTING.md)
* [Code of Conduct](./CODE_OF_CONDUCT.md)
* [Translation Guide](./docs/en/contribute/i18n.md)
* [Pull Request Template](./.github/PULL_REQUEST_TEMPLATE.md)
* [Sync Tools](tools/i18n/README.md)
---

*Last updated: 2025-06-16*
